# シンプルなストールテスト - 確実に競合を発生させる最小限のコード
.globl  _start
.set    noreorder

_start:
    # 共有メモリアドレス設定
    lui  $at, 0x1100           # $at = 0x11000000 (共有メモリベース)
    
    # 両コアが同じアドレスに同時アクセス（確実に競合発生）
    lw   $t0, 0($at)           # 共有メモリ読み込み
    addi $t0, $t0, 1           # インクリメント  
    sw   $t0, 0($at)           # 共有メモリ書き込み
    
    # デバッグ用：結果を確認できるようにt1に保存
    add  $t1, $t0, $zero       # $t1 = $t0
    
    # 終了（無限ループで停止）
loop:
    beq  $zero, $zero, loop
    nop